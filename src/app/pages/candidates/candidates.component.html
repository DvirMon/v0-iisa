<div class="candidates-container">
  <mat-card class="candidates-card">
    <mat-card-header>
      <div class="candidates-header">
        <div class="header-info">
          <mat-card-title>Candidate Management</mat-card-title>
          <mat-card-subtitle
            >Search, filter, and manage spaceflight
            candidates</mat-card-subtitle
          >
        </div>
      </div>
    </mat-card-header>
    <app-candidate-filters
      [filters]="filters()"
      [viewMode]="viewMode()"
      [resultCount]="filteredCandidates().length"
      [totalCount]="dashboardService.totalCandidates()"
      [loading]="filtersLoading()"
      (searchChange)="onSearchChange($event)"
      (statusFilterChange)="onStatusFilterChange($event)"
      (cityFilterChange)="onCityFilterChange($event)"
      (ageFilterChange)="onAgeFilterChange($event)"
      (dateFilterChange)="onDateFilterChange($event)"
      (sortChange)="onSortChange($event)"
      (clearFilters)="clearFilters()"
      (toggleView)="toggleViewMode($event)"
      (exportFiltered)="onExportFiltered()"
      (removeFilter)="onRemoveFilter($event)">
      >
    </app-candidate-filters>

    <mat-card-content>
      @if (viewMode() === 'list') {

      <app-candidate-list
        [candidates]="filteredCandidates()"
        [loading]="loading()"
        (candidateClick)="viewCandidateDetail($event)"
        (clearFilters)="clearFilters()">
      </app-candidate-list>

      } @else {
      <app-candidate-table
        [candidates]="filteredCandidates()"
        [loading]="loading()"
        (candidateView)="viewCandidateDetail($event)"
        (candidateEdit)="editCandidate($event)"
        (clearFilters)="clearFilters()">
      </app-candidate-table>

      }

      <!-- Empty State -->
      @if (filteredCandidates().length === 0) {
      <div class="empty-state">
        <mat-icon class="empty-icon">people_outline</mat-icon>
        <h3>No candidates found</h3>
        <p>Try adjusting your search or filter criteria</p>
      </div>
      }
    </mat-card-content>
  </mat-card>
</div>
